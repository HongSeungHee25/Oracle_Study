INSERT INTO customer VALUES ('momo123','aa111','김모모','010-1245-1213','Y');
INSERT INTO customer VALUES ('sana111','9845a','이사나','010-9546-1645','Y');
INSERT INTO customer VALUES ('shsh3510','3510','이승희','010-4567-8752','Y');
SELECT * FROM CUSTOMER c ;

INSERT INTO CAR VALUES (1001,'중형','그랜저',null,35000,15000,'758허4578','전기');
INSERT INTO CAR VALUES (1002,'준중형','SUV',null,50000,15000,'458하4125','기름');
INSERT INTO CAR VALUES (1003,'대형','카니발',null,70000,15000,'984허1245','전기');
SELECT * FROM CAR c ;

INSERT INTO CAR_RENT cr VALUES(1,'momo123',1001,'2023-07-01','2023-07-03');
INSERT INTO CAR_RENT cr VALUES(2,'sana111',1002,'2023-06-30','2023-07-01');
INSERT INTO CAR_RENT cr VALUES(3,'shsh3510',1003,'2023-07-04','2023-07-05');
SELECT * FROM CAR_RENT cr ;

-- 예약 상태 이름 
SELECT c.CAR_ID, c.CAR_GRADE, c.CAR_TYPE,
  (CASE
    WHEN cr.RENT_START > SYSDATE THEN '예약 중'
    WHEN cr.RENT_START < SYSDATE AND cr.RENT_END > SYSDATE THEN '대여 중'
    ELSE '대여 가능'
  END) AS RENT_TYPE, c.PRICE , c.INSURANCE ,c.CAR_NO, c.PL
FROM CAR c
LEFT JOIN CAR_RENT cr ON c.CAR_ID = cr.CAR_ID;
 


INSERT INTO PAYMENT p VALUES (1, 'momo123',1,'2023-06-28',NULL,'신용카드',1001);
INSERT INTO PAYMENT p VALUES (2, 'sana111',2,'2023-06-26',NULL,'신용카드',1002);
INSERT INTO PAYMENT p VALUES (3, 'shsh3510',3,'2023-07-01',NULL,'신용카드',1003);
SELECT * FROM PAYMENT p ;
-- 총 토탈 가격
SELECT p.PAYMENT_ID ,p.CUSTOMER_ID ,p.PAYMENT_DAY ,c.PRICE + c.INSURANCE AS money, p.PAYMENT_METHOD ,c.CAR_NO 
FROM PAYMENT p JOIN CAR c 
ON p.CAR_ID = c.CAR_ID ;

-- 총 토탈 가격 테이블
CREATE OR REPLACE VIEW total_price
AS 
SELECT p.PAYMENT_ID ,p.CUSTOMER_ID ,p.PAYMENT_DAY ,c.PRICE + c.INSURANCE AS money, p.PAYMENT_METHOD ,c.CAR_NO 
FROM PAYMENT p JOIN CAR c 
ON p.CAR_ID = c.CAR_ID ;

SELECT * FROM total_price;


